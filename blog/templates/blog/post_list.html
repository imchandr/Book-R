{% extends 'reviews/home.html' %}
{% load static %}



{% block content %}

<!-- search component -->
<script defer src="https://unpkg.com/alpinejs@3.2.3/dist/cdn.min.js"></script>

<div class="my-8 px-4 py-2 border-2 border-gray-300 flex items-center max-w-md mx-auto bg-white rounded-full "x-data="{ search: '' }">
    <div class="w-full">
        <input type="search" class="w-full px-4 py-1 text-gray-900 rounded-full focus:outline-none"
            placeholder="search" x-model="search">
    </div>
    <div>
        <button type="submit" class="flex items-center justify-center w-8 h-8 text-gray-100 rounded-full"
            :class="(search.length > 0) ? 'bg-green-500' : 'bg-gray-500 cursor-not-allowed'"
            :disabled="search.length == 0">
            <svg class="w-5 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"
                xmlns="http://www.w3.org/2000/svg">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                    d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
            </svg>
        </button>
    </div>
</div>
<!-- end search component -->
<div class="mx-40">
  
    <a href="{% url 'blog:create_post'%}" class="bg-white text-gray-800 font-bold rounded hover:border-gray-300 hover:bg-gray-200 hover:text-gray-900 shadow-md py-2 px-6 inline-flex items-center">
      <span class="mr-2">Create New Post</span>
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
        <path fill="currentcolor" d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"></path>
      </svg>
    </a>
    
 
</div>

{% for post in posts %}
<!-- post-component -->
<div class="container mx-auto my-12 ">

  <div class="relative rounded-lg flex flex-col md:flex-row items-center md:shadow-lg md:h-80 mx-2 border-2 hover:shadow-xl">
      
      <div class="z-0 order-1 md:order-2 relative w-full md:w-2/5 h-80 md:h-full overflow-hidden rounded-lg md:rounded-none md:rounded-r-lg">
          <div class="absolute inset-0 w-full h-full object-fill object-center bg-blue-400 bg-opacity-30 bg-cover bg-bottom" style="background-image: url( {{post.image.url}} ); background-blend-mode: multiply;"></div>
          <div class="md:hidden absolute inset-0 h-full p-6 pb-6 flex flex-col-reverse justify-start items-start bg-gradient-to-b from-transparent via-transparent to-gray-900">

              <h3 class="w-full font-bold text-2xl text-white leading-tight mb-2">{{post.title|truncatewords:10}}</h3>
              <h4 class="w-full text-xl text-gray-100 leading-tight">{{post.author}}</h4>
          </div>
          <svg class="hidden md:block absolute inset-y-0 h-full w-24 fill-current text-white -ml-12" viewBox="0 0 100 100" preserveAspectRatio="none">
              <polygon points="50,0 100,0 50,100 0,100" />
          </svg>
      </div>

      <div class="z-10 order-2 md:order-1 w-full h-full md:w-3/5 flex items-center -mt-6 md:mt-0">
          <div class="p-8 md:pr-18 md:pl-14 md:py-12 mx-2 md:mx-0 h-full bg-white rounded-lg md:rounded-none md:rounded-l-lg shadow-xl md:shadow-none ">
            
            <h3 class="hidden md:block font-bold text-2xl text-gray-700">{{post.title|truncatewords:15}}</h3>
            <h4 class="text-blue-600 hidden md:block text-md text-blue-600 my-1">Author: <span class="px-2">{{post.author}}</span></h4>
            
            <span class="text-blue-600 text-md">Added:<span class="px-2">{{post.publish|date}}</span></span>
            <span class="text-blue-600 text-md my-4">|<span class="pr-2"></span>{{post.get_readtime}} Read</span> 
              <h2 class="my-4 text-gray-600 text-justify ">{{post.body|safe|truncatewords:25}}</h2>
              <a class="flex items-baseline mt-3 text-blue-600 hover:text-blue-900 focus:text-blue-900" href="http://127.0.0.1:8000/blog/{{post.slug}}/">
                  <span>Read more</span>
                  <span class="text-xs ml-1">&#x279c;</span>
              </a>
          </div>
      </div>
    </div>
<!-- end-post-component -->
  
</div>
{% endfor %}

{% include 'blog/pagination.html' with page=posts %}
{% endblock content %}
